<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html
        PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core">

<h:head>
    <title>#{messages.welcome_title}</title>
    <h:outputStylesheet name="/css/loginStyles.css"/>
    <h:outputScript library="js" name="lib.js" target="head"/>
</h:head>

<h:body>
    <noscript>
        <h4>Включите Javscript в браузере для полноценной работы системы</h4>
    </noscript>

    <div id="login-form">
        <h1>#{messages.password_restore}</h1>

        <fieldset>
            <h:form action="" method="get" id="restore_form">

                <p>
                    Для восстановления пароля укажите электронную почту, которая была использован при регистрации
                    в системе. На этот ящик придёт письмо с паролем.
                </p>

                <h:outputLabel value='#{messages.input_login}:'/>
                <h:inputText id="email" value="#{user.email}" type="email" required="true" >
                    <f:validator validatorId="ru.hydrologist.validators.LoginValidator"/>
                </h:inputText>

                <h:commandButton action="#{user.restorePassword()}" value="#{messages.password_restore}">
                    <f:ajax event="mousedown" onevent="showProgress"/>
                </h:commandButton>

                <div class="clearfix">
                    <p></p>
                    <div id="cancel_restore">
                        <h:link value="#{messages.input_cancel}" outcome="login" />
                    </div>
                </div>

                <div class = "error">
                    <h:message for="email" styleClass="error"/>
                </div>

                <div id="loading_wrapper">
                    <h:graphicImage library="img" name="preloader.gif" width="80"/>
                </div>

            </h:form>
        </fieldset>

    </div>
</h:body>

</html>